<!DOCTYPE html><html>

<head>
<meta charset="utf-8">
<title>Lab05_A--UsersAndPermissions</title>
<style type="text/css">
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', monospace;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #a67f59;
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function {
	color: #DD4A68;
}

.token.regex,
.token.important {
	color: #e90;
}

.token.important {
	font-weight: bold;
}

.token.entity {
	cursor: help;

</style>
</head>
<body>
<h1 id="toc_0">Bioe 421/521: Microcontroller Applications</h1>

<h4 id="toc_1">Instructor: Jordan Miller<br>TA: Madeleine Gomel<br>github.com/jmil/Bioe421_521-MicrocontrollerApplications</h4>

<h2 id="toc_2">Lab 5A. Users and Permissions</h2>

<p>As we learned in class, programs are files on the computer that get read and loaded into memory by launching them as <q>processes</q>. Processes are single instance self-encapsulated copies of the program loaded in memory (one program can have multiple instances running). And there are tons of processes running on your computer all the time. The computer uses two major conventions to decide which processes to run, and when. The first is order of operations, where programs are run as soon as they can be after they are launched. The second is based on a hierarchy of users and permissions on your system.</p>

<h3 id="toc_3">Change your Password!</h3>

<p>Right now, you and the entire Internets have your username and password, because they are still the default set for the Pi:</p>

<pre><code>username: pi
password: raspberry
</code></pre>

<p>The first thing we need to do is to change your password. We do this using the <code>passwd</code> command. Let&#39;s see what this command can do:</p>

<pre><code>$ man passwd
</code></pre>

<p>Carefully choose a new password with your partner. If you forget this password, your Instructor may not be able to help you get access to your system again. Let&#39;s now set your password. You will be asked to enter your current password, and then enter the new password twice (for confirmation). Your typed password characters will not show up on the display (this is a security feature):</p>

<pre><code>$ passwd
Changing password for pi.
(current) UNIX password: 
Enter new UNIX password: 
Retype new UNIX password:
passwd: password updated successfully
</code></pre>

<p>Phew! Now hopefully only you and your partner will have your password.</p>

<p>Let&#39;s see more about user groups, using the <code>id</code> command:</p>

<pre><code>$ man id
$ id
uid=1000(pi) gid=1000(pi) groups=1000(pi),4(adm),20(dialout),24(cdrom),27(sudo),29(audio),44(video),46(plugdev),60(games),100(users),105(netdev),999(input),1002(spi),1003(gpio)
</code></pre>

<p>Wow, that&#39;s a lot of stuff! We can understand more about this output. your <code>uid</code> is the unique integer for your userID (with your human-readable username shown in parentheses), and your <code>gid</code> is the default groupID for your user account. Your <code>pi</code> acount is also a member of the <code>adm</code> group (for administration), <code>dialout</code> (for using the emulated serial communication hardware connection), <code>cdrom</code> (able to access and control hardware like CD-ROMs [do you know what a CD-ROM is?]), and <code>sudo</code> (as we learned about in class, a member allowed to become the <code>root</code> user, a.k.a. the superuser). The other groups can be learned about online, generally they have to do with hardware access, which you might want to allocate to specific groups of users, but not others.</p>

<p>Let&#39;s see what commands are related to user accounts. It would be great if there were a way to search all <code>man</code> pages for a particular text string, kind of like running <code>grep</code> on all of them. We can do this with the <code>apropos</code> command.</p>

<pre><code>$ man apropos
$ apropos user
</code></pre>

<p>Now we will add a new group of your choosing to the groups database, and then add your user account to that group. Use a name of your choice (or you can use my suggestion):</p>

<pre><code>$ man addgroup
$ addgroup awesometown
addgroup: Only root may add a user or group to the system.
$ sudo addgroup awesometown
[sudo] password for pi:
Adding group `awesometown` (GID 1005) ...
Done.
$ adduser pi awesometown
adduser: Only root may add a user or group to the system.
$ sudo adduser pi awesometown
Adding user `pi` to group `awesometown` ...
Adding user pi to group awesometown
Done.
</code></pre>

<p>Logout and login again to update the user info:</p>

<pre><code>$ exit
</code></pre>

<p>If that didn&#39;t work, try a <code>reboot</code>:</p>

<pre><code>$ sudo shutdown -r now
</code></pre>

<p>What is your new group name? What is your new group ID (hint: it should be an integer)?</p>

<pre><code>group name:
group ID:
</code></pre>

<h3 id="toc_4">Collaborate</h3>

<p>Now that your user account is locked down with a unique password, it will be safe to create a new user account for your neighboring lab group on each of your respective Pis. While logged in as your <code>pi</code> account, you can add a new user account with username of their choice. Allow them to also set their password, and enter information as appropriate when prompted.</p>

<pre><code>$ sudo adduser friendly-neighbor
Adding user `friendly-neighbor`
...
</code></pre>

<p>If you don&#39;t like their choice of username, you can delete their account with:</p>

<pre><code>$ man userdel
$ userdel friendly-neighbor
userdel: Permission denied.
userdel: cannot lock /etc/passwd; try again later.
$ sudo userdel friendly-neighbor
$ _
</code></pre>

<p>Wow, that was almost too easy! Now, add your <code>friendly-neighbor</code> user account to the new group you created above.</p>

<p>Why might you want to create and then join a group between two user accounts?</p>

<pre><code>:
</code></pre>

<h3 id="toc_5">Connect Remotely</h3>

<p>Now with each group being given a working user account on another Pi, you can ssh into your neighbor&#39;s Pi to get <strong>shell access</strong>. Make sure you trade IP address info too (recall this is your <code>inet addr</code> for either the ethernet connection <code>eth0</code> or the WiFi receiver <code>wlan0</code> depending on how you are currently connecting to the internet). If you&#39;re not sure just run <code>ifconfig</code> with no options. Here we will use <code>eth0</code>:</p>

<pre><code>$ ifconfig eth0
</code></pre>

<p>Now you can login to your neighbor&#39;s Pi using their IP address:</p>

<pre><code>$ ssh friendly-neighbor@IP_ADDRESS
$ whoami
$ pwd
$ cd /home
$ ls -la
$ id
</code></pre>

<p>Let&#39;s inspect the top-level <code>/</code> directory of the hard drive:</p>

<pre><code>$ cd /
$ ls -la
</code></pre>

<p>What are the full permissions for <code>home</code>? Is it a file or folder (and how can you tell?)? Be sure to specify who is the owner and group who has those permissions:</p>

<pre><code>:
</code></pre>

<p>What is your <code>uid</code> and <code>gid</code> for your neighbor&#39;s Pi?</p>

<pre><code>uid:
gid:
</code></pre>

<p>What groups is this user in? What command did you run to determine this?</p>

<pre><code>groups  :
        :
        :
command used: 
</code></pre>

<p>You can disconnect from your neighbor&#39;s pi using <code>exit</code> which will close that shell:</p>

<pre><code>$ man exit
$ exit
</code></pre>

<h4 id="toc_6">We are running the Raspian OS. Raspbian is a portmanteau of <u>Rasp</u>berry Pi and De<u>bian</u> Linux because it is a customized version of Debian that works well on Raspberry Pi. So, you can learn more about how users and permissions work on your Raspberry Pi by learning about Debian Linux:</h4>

<h4 id="toc_7"><a href="http://wiki.debian.org/Permissions">http://wiki.debian.org/Permissions</a></h4>

<h4 id="toc_8">And you can learn more about Debian policies for Users and Groups by vising here:</h4>

<h4 id="toc_9"><a href="http://www.debian.org/doc/debian-policy/ch-opersys.html">http://www.debian.org/doc/debian-policy/ch-opersys.html</a></h4>

<script type="text/javascript">
self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{};var Prism=function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,t=self.Prism={util:{encode:function(e){return e instanceof n?new n(e.type,t.util.encode(e.content)):"Array"===t.util.type(e)?e.map(t.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){var n=t.util.type(e);switch(n){case"Object":var r={};for(var a in e)e.hasOwnProperty(a)&&(r[a]=t.util.clone(e[a]));return r;case"Array":return e.slice()}return e}},languages:{extend:function(e,n){var r=t.util.clone(t.languages[e]);for(var a in n)r[a]=n[a];return r},insertBefore:function(e,n,r,a){a=a||t.languages;var i=a[e],o={};for(var l in i)if(i.hasOwnProperty(l)){if(l==n)for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s]);o[l]=i[l]}return a[e]=o},DFS:function(e,n){for(var r in e)n.call(e,r,e[r]),"Object"===t.util.type(e)&&t.languages.DFS(e[r],n)}},highlightAll:function(e,n){for(var r,a=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),i=0;r=a[i++];)t.highlightElement(r,e===!0,n)},highlightElement:function(r,a,i){for(var o,l,s=r;s&&!e.test(s.className);)s=s.parentNode;if(s&&(o=(s.className.match(e)||[,""])[1],l=t.languages[o]),l){r.className=r.className.replace(e,"").replace(/\s+/g," ")+" language-"+o,s=r.parentNode,/pre/i.test(s.nodeName)&&(s.className=s.className.replace(e,"").replace(/\s+/g," ")+" language-"+o);var c=r.textContent;if(c){var g={element:r,language:o,grammar:l,code:c};if(t.hooks.run("before-highlight",g),a&&self.Worker){var u=new Worker(t.filename);u.onmessage=function(e){g.highlightedCode=n.stringify(JSON.parse(e.data),o),t.hooks.run("before-insert",g),g.element.innerHTML=g.highlightedCode,i&&i.call(g.element),t.hooks.run("after-highlight",g)},u.postMessage(JSON.stringify({language:g.language,code:g.code}))}else g.highlightedCode=t.highlight(g.code,g.grammar,g.language),t.hooks.run("before-insert",g),g.element.innerHTML=g.highlightedCode,i&&i.call(r),t.hooks.run("after-highlight",g)}}},highlight:function(e,r,a){var i=t.tokenize(e,r);return n.stringify(t.util.encode(i),a)},tokenize:function(e,n){var r=t.Token,a=[e],i=n.rest;if(i){for(var o in i)n[o]=i[o];delete n.rest}e:for(var o in n)if(n.hasOwnProperty(o)&&n[o]){var l=n[o];l="Array"===t.util.type(l)?l:[l];for(var s=0;s<l.length;++s){var c=l[s],g=c.inside,u=!!c.lookbehind,f=0;c=c.pattern||c;for(var h=0;h<a.length;h++){var d=a[h];if(a.length>e.length)break e;if(!(d instanceof r)){c.lastIndex=0;var p=c.exec(d);if(p){u&&(f=p[1].length);var m=p.index-1+f,p=p[0].slice(f),v=p.length,y=m+v,k=d.slice(0,m+1),b=d.slice(y+1),w=[h,1];k&&w.push(k);var N=new r(o,g?t.tokenize(p,g):p);w.push(N),b&&w.push(b),Array.prototype.splice.apply(a,w)}}}}}return a},hooks:{all:{},add:function(e,n){var r=t.hooks.all;r[e]=r[e]||[],r[e].push(n)},run:function(e,n){var r=t.hooks.all[e];if(r&&r.length)for(var a,i=0;a=r[i++];)a(n)}}},n=t.Token=function(e,t){this.type=e,this.content=t};if(n.stringify=function(e,r,a){if("string"==typeof e)return e;if("[object Array]"==Object.prototype.toString.call(e))return e.map(function(t){return n.stringify(t,r,e)}).join("");var i={type:e.type,content:n.stringify(e.content,r,a),tag:"span",classes:["token",e.type],attributes:{},language:r,parent:a};"comment"==i.type&&(i.attributes.spellcheck="true"),t.hooks.run("wrap",i);var o="";for(var l in i.attributes)o+=l+'="'+(i.attributes[l]||"")+'"';return"<"+i.tag+' class="'+i.classes.join(" ")+'" '+o+">"+i.content+"</"+i.tag+">"},!self.document)return self.addEventListener?(self.addEventListener("message",function(e){var n=JSON.parse(e.data),r=n.language,a=n.code;self.postMessage(JSON.stringify(t.tokenize(a,t.languages[r]))),self.close()},!1),self.Prism):self.Prism;var r=document.getElementsByTagName("script");return r=r[r.length-1],r&&(t.filename=r.src,document.addEventListener&&!r.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",t.highlightAll)),self.Prism}();"undefined"!=typeof module&&module.exports&&(module.exports=Prism);
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Register.StartupHook('End', function () {
   MathJaxListener.invokeCallbackForKey_('End');
})
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        processEscapes: true
    }
})
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>

</html>
